# Lab11 设计文档

**吴逸昕 19302010013**

-----------------

### Questions

#### Cookie与Session的功能

Cookie是存储在客户端机器上的小段信息，它由Web服务器发送给浏览器，
并代表服务器存储在用户的机器上，提供了持续的存储识别数据的机制，保存了该客户机访问这个Web 文档时的信息, 当客户机再次访问这个 Web 文档时这些信息可供该文档使用。

客户端通过用户名和密码请求服务端，服务端就会生成身份认证相关的session数据，比如用户、用户名等信息来生成一份session数据，会保存在内存里或内存数据库里，并将sessionId通过Set-cookie响应头返回给客户端， 客户端则会把sessionId存在cookie中。此后，客户端发起的所有请求都会带上该sessionId，服务单会通过该sessionId寻找session数据并解析，由此得知当前登录状态有没有登陆，以及拥有什么权限。

#### Cookie与Session的优劣

cookie机制采用的是在客户端保持状态的方案，而session机制采用的是在服务器端保持状态的方案

Cookie优势：
（1）极高的扩展性和可用性 
（2）数据持久性
（3）不需要任何服务器资源，因为cookie是存储在客户端并发送给服务器读取
（4）可配置到期规则，控制cookie的生命周期，使之不会永远有效，偷盗者可能拿到的是一个过期的cookie
（5）简单性，基于文件的轻量结构
（6）通过良好的编程，控制保存在cookie中的Session对象的大小
（7）通过加密和安全传输技术（ssl），减少cookie被破解的可能性
（8）只要cookie中不存放敏感的数据，即使被盗也不会有重大损失

Cookie缺点：
（1）需要字符串解析 
（2）有些服务器不支持 
（3）需要磁盘I/O,速度较慢
（4）有最大存储量限制，即cookie的数量与长度均有限制
（5）安全性和个人隐私问题，cookie可能被截取篡改，如果cookie被拦截，就可能会获取到所有的Session信息
（6）用户配置为禁用，有的用户禁用了浏览器或者客户端设备接受cookie的能力，因此限制了这一功能
    

Session优势：
    （1）如果要在诸多Web页间传递一个变量，那么用Session变量要比通过QueryString传递变量可使问题简化
    （2）session保存在服务器端相对安全
    （3）结合cookie使用，较为灵活，兼容性好
    （4）可以在任何时候直接使用session变量，而不必事先声明；使用完毕后，也不必考虑将其释放，因为它将自动释放

Session缺点：
    （1）同一SessionId始终给同一服务器，难以起到负载均衡效果
    （2）cookie+session在跨域场景很麻烦
    （3）对于分布式部署，需要做多机共享session机制
    （4）基于cookie的机制容易被CSRF
    （5）查询session信息可能会有数据库查询操作，带来性能问题
    （6）因为创建Session变量有很大的随意性，可随时调用，不需要开发者做精确地处理，所以，过度使用session变量将会导致代码不可读而且不好维护

-----------------
